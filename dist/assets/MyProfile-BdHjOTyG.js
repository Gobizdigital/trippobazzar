import{G as k,r as c,j as e,h as B,u as O,c as I,D as M,M as C,x as W,d as R}from"./index-D_lxvvfu.js";import{E as U}from"./index-C-M898d6.js";function G(a){return k({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(a)}function _({userDetails:a,setIsModalOpen:h,setExtraTravellers:s,updateUser:p}){const[t,u]=c.useState({TravellersName:"",TravellersEmail:"",TravellersAge:"",TravellersNumber:"",countryCode:"+91",TravellersDateOfBirth:"",TravellersPassportNumber:"",TravellersPassportIssuedCountry:"",TravellersPassportDateOfExpiry:""}),x=n=>{u(d=>({...d,[n.target.name]:n.target.value}))},o=()=>{const n={TravellersName:t==null?void 0:t.TravellersName,TravellersEmail:t==null?void 0:t.TravellersEmail,TravellersAge:t==null?void 0:t.TravellersAge,TravellersNumber:`${t==null?void 0:t.countryCode}-${t==null?void 0:t.TravellersNumber}`,TravellersDateOfBirth:t==null?void 0:t.TravellersDateOfBirth,TravellersPassportNumber:t==null?void 0:t.TravellersPassportNumber,TravellersPassportIssuedCountry:t==null?void 0:t.TravellersPassportIssuedCountry,TravellersPassportDateOfExpiry:t==null?void 0:t.TravellersPassportDateOfExpiry},d={ExtraTravellers:[...a.ExtraTravellers||[],n]};p(d),s(v=>[...v,n]),u({TravellersName:"",TravellersEmail:"",TravellersAge:"",TravellersNumber:"",countryCode:"+91",TravellersDateOfBirth:"",TravellersPassportNumber:"",TravellersPassportIssuedCountry:"",TravellersPassportDateOfExpiry:""}),h(!1)};return e.jsx("div",{className:`fixed inset-0 bg-transparent  text-black 
  backdrop-blur-sm z-100 bg-opacity-50 flex items-center justify-center`,children:e.jsxs("div",{className:"bg-white px-3 overflow-y-auto py-6  md:py-6 lg:p-9 rounded-lg h-auto md:h-auto w-[87%] sm:w-[70%] md:w-[60%] lg:w-[50%] shadow-lg relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Traveler’s Info"}),e.jsx("button",{className:"text-red-500 font-semibold",children:"Remove"})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-4",children:"User Details"}),e.jsxs("div",{className:"grid md:grid-cols-3 grid-cols-1 text-sm gap-4 mt-4",children:[e.jsx("input",{type:"text",name:"TravellersName",value:t.TravellersName,onChange:x,placeholder:"Name",className:"border p-2 rounded-md"}),e.jsx("input",{type:"text",name:"TravellersEmail",value:t.TravellersEmail,onChange:x,placeholder:"Email",className:"border p-2 rounded-md"}),e.jsx("input",{type:"text",name:"TravellersAge",value:t.TravellersAge,onChange:x,placeholder:"Age",className:"border p-2 rounded-md"}),e.jsxs("div",{className:"flex justify-center col-auto md:col-span-2 items-center",children:[e.jsxs("select",{name:"countryCode",value:t.countryCode,onChange:x,className:"border p-2 rounded-l-md",children:[e.jsx("option",{value:"+91",children:"+91"}),e.jsx("option",{value:"+1",children:"+1"}),e.jsx("option",{value:"+44",children:"+44"})]}),e.jsx("input",{type:"text",name:"TravellersNumber",value:t.TravellersNumber,onChange:x,placeholder:"Phone Number",className:"border p-2 flex-1 rounded-r-md"})]}),e.jsx("input",{type:"date",name:"TravellersDateOfBirth",value:t.TravellersDateOfBirth,onChange:x,className:"border p-2 rounded-md"})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-6",children:"Passport Details"}),e.jsxs("div",{className:"grid text-sm md:grid-cols-2 grid-cols-1 gap-4 mt-4",children:[e.jsx("input",{type:"text",name:"TravellersPassportNumber",value:t.TravellersPassportNumber,onChange:x,placeholder:"Passport Number",className:"border p-2 rounded-md"}),e.jsxs("select",{name:"TravellersPassportIssuedCountry",value:t.TravellersPassportIssuedCountry,onChange:x,className:"border p-2 rounded-md",children:[e.jsx("option",{value:"",children:"Issuing Country"}),e.jsx("option",{value:"India",children:"India"}),e.jsx("option",{value:"USA",children:"USA"}),e.jsx("option",{value:"UK",children:"UK"})]}),e.jsx("input",{type:"date",name:"TravellersPassportDateOfExpiry",value:t.TravellersPassportDateOfExpiry,onChange:x,className:"border p-2 rounded-md"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx("button",{onClick:()=>{h(!1)},className:" text-red-600 px-6 mr-4 py-2 rounded-md",children:"cancel"}),e.jsx("button",{onClick:o,className:"bg-green-500 text-white px-6 py-2 rounded-md",children:"Save"})]})]})})}const $=c.forwardRef(({profileFields:a,setUserDetails:h,updateUser:s},p)=>{const[t,u]=c.useState([]);c.useEffect(()=>{if(a!=null&&a.WishListCountries&&(a!=null&&a.WishListStates)){const o=a==null?void 0:a.WishListStates.map(d=>d),n=a==null?void 0:a.WishListCountries.map(d=>d);u([...o,...n])}},[a]);const x=async(o,n)=>{o.stopPropagation();let d=[...a.WishListCountries],v=[...a.WishListStates];d.some(i=>i._id===n)?(d=d.filter(i=>i._id!==n),h(i=>({...i,WishListCountries:d}))):v.some(i=>i._id===n)&&(v=v.filter(i=>i._id!==n),h(i=>({...i,WishListStates:v})));try{await s({WishListCountries:d,WishListStates:v})}catch(i){console.error("Error updating user:",i)}};return e.jsx("section",{ref:p,className:"relative bg-cover bg-opacity-0 px-0 py-5",children:e.jsxs("div",{className:"overflow-x-auto rounded-lg scrollbar-hide py-8 px-5 bg-white h-auto w-full",children:[e.jsx("h3",{className:"text-base em:text-xl mb-4 font-bold",children:"Bucket Lists"}),e.jsx("div",{className:"flex gap-8 w-56",children:t.map((o,n)=>e.jsxs("div",{className:"relative border hover:cursor-pointer group rounded-lg overflow-hidden shadow-lg w-[270px] flex-shrink-0 snap-center",children:[e.jsx("div",{className:"w-full h-48 overflow-hidden",children:e.jsx("img",{src:o.StatePhotoUrl||o.CountryPhotoUrl,alt:`Image of ${n}`,className:"w-full h-full group-hover:scale-105 duration-300 ease-in-out transition-transform object-cover"})}),e.jsx("p",{className:"absolute top-0 left-0 bg-green-500 text-white px-3 py-2 rounded-br-md",children:o==null?void 0:o.price}),e.jsx("button",{onClick:d=>x(d,o._id),className:"absolute top-1 right-2 text-2xl p-2 rounded-full transition-all text-pink-500",children:e.jsx(B,{})}),e.jsxs("div",{className:"bg-white w-full px-3 py-2 flex justify-between items-center",children:[e.jsx("p",{children:o.StateName||o.CountryName}),e.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform ease-in-out duration-300",children:"→"})]})]},n))})]})})}),z=c.forwardRef(({profileFields:a},h)=>{var s;return e.jsx("section",{ref:h,className:"relative bg-cover bg-opacity-0 px-0 py-5",children:e.jsxs("div",{className:"overflow-x-auto scrollbar-hide rounded-lg py-8 px-5 bg-white h-auto w-full",children:[e.jsx("h3",{className:"text-base em:text-xl mb-4 font-bold",children:"Coupons"}),e.jsx("div",{className:"flex gap-8 w-56",children:(s=a==null?void 0:a.Coupons)==null?void 0:s.map(p=>e.jsxs("div",{className:"relative group rounded-lg overflow-hidden shadow-lg h-[250px] w-[230px] flex-shrink-0 snap-center bg-cover bg-center",style:{backgroundImage:"url(/bg-home.webp)"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsx("div",{className:"absolute bg-[#fafafa] w-12 h-12 -left-[22px] top-1/2 rounded-full"}),e.jsx("div",{className:"absolute bg-[#fafafa] w-12 h-12 -right-[22px] top-1/2 rounded-full"}),e.jsx("div",{className:"absolute w-[72%] mx-auto h-1 left-1/2 top-[59%] -translate-x-1/2 border-t-[3px] border-dashed border-white"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white text-center px-1 gap-2",style:{textShadow:"4px 4px 8px rgba(0.1, 0.2, 0.5, 0.7)"},children:[e.jsxs("h1",{className:"text-4xl font-extrabold",children:[p==null?void 0:p.discountPercentage,"% OFF"]}),e.jsx("div",{className:"w-[50%] h-[2px] bg-white"}),e.jsx("p",{className:"text-sm font-semibold mb-11",children:"On All Trips"}),e.jsx("button",{className:"mt-4 text-sm px-4 py-2 w-[90%] bg-[#03B58B] text-white rounded-md hover:bg-[#029f7c] transition",children:"Redeem Now"})]})]},p._id))})]})})});function J(){const[a,h]=c.useState(!1),{userDetails:s,setUserDetails:p,isLoading:t}=O(),[u,x]=c.useState(!1),o=c.useRef(null),n=c.useRef(null),d=c.useRef(null),v=c.useRef(null),i=c.useRef(null),[N,f]=c.useState((s==null?void 0:s.ExtraTravellers)||[]),[r,y]=c.useState({FullName:(s==null?void 0:s.FullName)||"",DateOfBirth:(s==null?void 0:s.DateOfBirth)||"",Gender:(s==null?void 0:s.Gender)||"",MaritalStatus:(s==null?void 0:s.MaritalStatus)||"",Address:(s==null?void 0:s.Address)||"",PinCode:(s==null?void 0:s.PinCode)||"",Email:(s==null?void 0:s.Email)||"",Coupons:(s==null?void 0:s.Coupons)||[],WishListCountries:(s==null?void 0:s.WishListCountries)||[],WishListStates:(s==null?void 0:s.WishListStates)||[]});c.useEffect(()=>{!t&&s&&s._id&&(y({FullName:s.FullName||"",DateOfBirth:s.DateOfBirth||"",Gender:s.Gender||"",MaritalStatus:s.MaritalStatus||"",Address:s.Address||"",PinCode:s.PinCode||"",Email:(s==null?void 0:s.Email)||"",Coupons:(s==null?void 0:s.Coupons)||[],WishListCountries:(s==null?void 0:s.WishListCountries)||[],WishListStates:(s==null?void 0:s.WishListStates)||[]}),f(s.ExtraTravellers||[]))},[s]);const T=Object.values(r).filter(l=>typeof l=="string"?l.trim()!=="":l!=null).length,P=Object.keys(r).length,w=Math.round(T/P*100),g=(l,m)=>{y(b=>({...b,[m]:l}))},j=async l=>{try{const m=JSON.parse(localStorage.getItem("userInfo"));if(!m)return;const A=W(m.token).id;(await R.put(`https://trippo-bazzar-backend.vercel.app/api/users/${A}`,l,{headers:{Authorization:`Bearer ${m.token}`}})).status===200&&console.log("User updated successfully")}catch(m){console.error("Error updating user:",m)}},S=()=>{const l={FullName:r.FullName,DateOfBirth:r.DateOfBirth,Gender:r.Gender,MaritalStatus:r.MaritalStatus,Address:r.Address,PinCode:r.PinCode};j(l)},E=[{id:"profile",label:"Profile",ref:o},{id:"loginDetails",label:"Login Details",ref:n},{id:"savedTravelers",label:"Saved Travelers",ref:d},{id:"myCoupons",label:"My Coupons",ref:v},{id:"bucketlist",label:"Bucket List",ref:i}],L=l=>{l.current.scrollIntoView({behavior:"smooth"})};return t?e.jsx(I,{}):e.jsxs("div",{className:"md:flex max-w-[1920px] mx-auto p-0 m-0 h-auto w-full bg-tranparent",children:[e.jsxs("div",{className:"md:w-[20%]  md:sticky top-[8px] shadow-sm md:shadow-none h-full md:mx-8 md:mt-6  z-10 md:block w-full md:rounded-xl bg-white p-4 ",children:[e.jsx("div",{className:"p-[5%] mb-3 text-center w-[103px] h-[103px] flex items-center justify-center font-semibold text-white rounded-[10px] customfradiant text-3xl",children:r!=null&&r.FullName?r.FullName.split(" ").filter(l=>l).slice(0,2).map(l=>{var m;return(m=l[0])==null?void 0:m.toUpperCase()}).join(""):"NN"}),e.jsx("h3",{className:"font-semibold mb-0",children:r.FullName||"No Name"}),e.jsx("p",{className:"text-[.7rem] text-[#0028319E] mb-6 ",children:r.Email||"Email"}),e.jsx("ul",{className:" flex flex-wrap md:flex-col gap-4 md:gap-0 w-full text-[.8rem]",children:E.map(({id:l,label:m,ref:b})=>e.jsxs("li",{onClick:()=>L(b),className:"cursor-pointer text-gray-700 mb-2 justify-between flex items-center",children:[e.jsxs("span",{className:"flex  items-center",children:[e.jsx("span",{className:"w-4 h-4 border-[.5px] flex items-center justify-center border-med-green rounded-full mr-3",children:e.jsx("span",{className:"w-1 h-1 bg-med-green rounded-full"})}),m]}),e.jsx("span",{className:"hidden md:flex font-bold text-2xl ",children:"→"})]},l))})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex-1 p-6  md:mt-6 md:rounded-l-xl bg-white  h-auto  space-y-12",children:[e.jsxs("div",{ref:o,children:[e.jsxs("div",{className:"md:mt-3 mb-16",children:[e.jsx("p",{className:" text-sm  text-start text-gray-600",children:"Your Profile is incomplete"}),e.jsxs("p",{className:" text-sm  text-right text-gray-600",children:[w,"%"," "]}),e.jsx("div",{className:"relative w-full  bg-gray-200 h-[3px] rounded-md",children:e.jsx("div",{className:"absolute top-0 left-0 bg-[#00B58AB2] h-[3px] rounded-md",style:{width:`${w}%`}})})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Profile"}),e.jsx("p",{className:"text-[#0028319E] text-sm font-[400] mt-2",children:"User Details"})]}),e.jsx("div",{onClick:()=>{x(l=>!l)},children:u?e.jsxs("div",{className:"flex items-center  gap-4",children:[e.jsx("button",{onClick:S,className:"px-4 py-[10px] text-lg text-white bg-med-green mt-[5px] rounded-lg",children:"Save"}),e.jsx("div",{className:"flex items-center justify-center ",children:e.jsx(G,{className:"text-red-600 w-[50px] ml-[5px] mt-[5px] h-[50px] p-2 border rounded-full border-red-600"})})]}):e.jsx(U,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 esm:grid-cols-2 md:grid-cols-3 gap-4 mt-4 text-sm",children:[e.jsx("input",{type:"text",placeholder:"FullName",name:"FullName",disabled:!u,value:r.FullName,className:"border p-2 rounded-md",onChange:l=>{g(l.target.value,"FullName")}}),e.jsx("div",{className:"w-full",children:e.jsx(M,{selected:r.DateOfBirth,name:"DateOfBirth",onChange:l=>g(l,"DateOfBirth"),disabled:!u,wrapperClassName:"w-full",className:"border p-2 w-full rounded-md",placeholderText:"2004-03-02",dateFormat:"yyyy-MM-dd"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"border appearance-none p-2 rounded-md w-full ",value:r.Gender,disabled:!u,onChange:l=>{g(l.target.value,"Gender")},name:"Gender",children:[e.jsx("option",{className:"text-gray-400",children:"Gender"}),e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Female"}),e.jsx("option",{children:"Non-Binary"})]}),e.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center pointer-events-none",children:e.jsx(C,{})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"border appearance-none p-2 w-full rounded-md ",disabled:!u,value:r.MaritalStatus,onChange:l=>{g(l.target.value,"MaritalStatus")},name:"MaritalStatus",children:[e.jsx("option",{children:"Marital Status"}),e.jsx("option",{children:"Single"}),e.jsx("option",{children:"Married"})]}),e.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center pointer-events-none",children:e.jsx(C,{})})]}),e.jsx("input",{type:"text",placeholder:"Address",disabled:!u,name:"Address",value:r.Address,className:"border p-2 rounded-md",onChange:l=>{g(l.target.value,"Address")}}),e.jsx("input",{type:"text",placeholder:"Pincode",disabled:!u,name:"PinCode",value:r.PinCode,className:"border p-2 rounded-md",onChange:l=>{g(l.target.value,"PinCode")}})]})]}),e.jsxs("div",{ref:n,children:[e.jsx("h3",{className:"text-xl font-bold",children:"Login Details"}),e.jsxs("div",{className:"grid gride-cols-1  md:grid-cols-2 lg:grid-cols-3 text-sm gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{className:"border appearance-none p-2 rounded-l-md",children:[e.jsx("option",{className:"hover:bg-green-100",children:"+91"}),e.jsx("option",{className:"hover:bg-green-100",children:"+1"}),e.jsx("option",{className:"hover:bg-green-100",children:"+44"})]})}),e.jsx("input",{type:"text",placeholder:"Phone Number",className:"border p-2 flex-1 rounded-r-md"})]}),e.jsx("input",{type:"email",placeholder:"Email",className:"border p-2 rounded-md"}),e.jsxs("div",{className:"relative col-auto md:col-span-2 lg:col-span-1",children:[e.jsx("input",{type:"password",placeholder:"Password",className:"border p-2 w-full rounded-md"}),e.jsx("span",{className:"absolute right-3 top-3 cursor-pointer",children:"👁️"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("label",{className:"text-sm text-[#00B58A] cursor-pointer",children:"Change Password?"})})]}),e.jsxs("div",{ref:d,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-base em:text-xl font-bold",children:"Saved Travelers"}),e.jsx("button",{onClick:()=>h(!0),className:"text-sm md:text-base  text-med-green border-black border-[1.3px] hover:bg-med-green hover:border-med-green hover:text-white px-1 md:px-4 py-2 rounded-md",children:"+ Add Traveler"})]}),e.jsx("ul",{className:"mt-6 space-y-4",children:N.length>0?N.map((l,m)=>e.jsxs("li",{className:" border-b flex justify-between gap-4  bg-white p-4 rounded-md",children:[e.jsxs("div",{className:"grid grid-cols-1 em:grid-cols-2 sm:grid-cols-3 w-full lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-[#0028319E] font-normal bg-white rounded-md",children:"Name"}),e.jsx("p",{children:l.TravellersName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-[#0028319E] font-normal bg-white rounded-md",children:"Age"}),e.jsx("p",{children:l.TravellersAge})," "]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-[#0028319E] font-normal bg-white rounded-md",children:"Gender"}),e.jsx("p",{children:l.TravellersGender||"NN"})," "]}),e.jsxs("div",{className:"lg:block hidden",children:[e.jsx("label",{className:"text-sm text-[#0028319E] font-normal bg-white rounded-md",children:"Number"}),e.jsx("p",{children:l.TravellersNumber})]})]}),e.jsx("div",{className:"flex items-end whitespace-nowrap",children:e.jsx("button",{className:"text-[#00B58A] bg-none text-end text-sm",children:"View Details"})})]},m)):e.jsx("li",{children:"No Travellers. Add Travellers."})})]})]}),a&&e.jsx(_,{userDetails:s,updateUser:j,setIsModalOpen:h,setExtraTravellers:f}),e.jsx(z,{ref:v,profileFields:r}),e.jsx($,{updateUser:j,setUserDetails:p,ref:i,profileFields:r})]})]})}export{J as default};
