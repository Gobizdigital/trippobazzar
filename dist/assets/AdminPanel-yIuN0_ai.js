import{j as e,N as le,r as u,d as J,a as ee,c as q,w as ae,k as ne,l as G,x as oe}from"./index-D_lxvvfu.js";import{u as Q}from"./useFetch-CzcActS5.js";const re=({handleClick:j})=>{const f=["users","continent","country","state","package","hotels"];return e.jsx("div",{className:"w-auto pr-3 bg-green-50 h-auto m-0 border-r-4 border-white font-poppins font-medium ",children:e.jsx("nav",{className:"flex flex-col pt-10  items-start",children:f.map((d,k)=>e.jsx(le,{to:`/adminpanel/${d}`,onClick:()=>j(d.toLowerCase().trim()),className:"mb-4 text-start capitalize pl-2 w-full hover:bg-green-50 hover:text-green-600",activeclassname:"bg-green-600 text-white",children:d},k))})})},ce=({data:j})=>{const[f,d]=u.useState(j),[k,i]=u.useState(null),[r,m]=u.useState({}),a=async h=>{d(f.filter(x=>x._id!==h));try{await J.delete(`https://trippo-bazzar-backend.vercel.app/api/users/${h}`)}catch(x){console.log(x)}},N=h=>{i(h._id),m({...h})},g=async()=>{d(f.map(h=>h._id===k?{...h,...r}:h));try{await J.put(`https://trippo-bazzar-backend.vercel.app/api/users/${k}`,r)}catch(h){console.log(h)}i(null)};return e.jsxs("div",{className:"mr-1 p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-green-600 font-poppins font-bold",children:["Total Users: ",f==null?void 0:f.length]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Sr."}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Name"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Email"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Phone"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"IsAdmin"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"D.O.B"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:f==null?void 0:f.map((h,x)=>e.jsx("tr",{className:"border-b border-gray-200",children:k===h._id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border border-gray-200 p-2",children:x}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("input",{type:"text",value:r.FullName||"",onChange:p=>m({...r,FullName:p.target.value}),className:"w-full border p-2 rounded"})}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("input",{type:"email",value:r.Email||"",onChange:p=>m({...r,Email:p.target.value}),className:"w-full border p-2 rounded"})}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("input",{type:"text",value:r.MobileNumber||"",onChange:p=>m({...r,MobileNumber:p.target.value}),className:"w-full border p-2 rounded"})}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsxs("select",{value:r.isAdmin||!1,onChange:p=>m({...r,isAdmin:p.target.value==="true"}),className:"w-full border p-2 rounded",children:[e.jsx("option",{value:!0,children:"True"}),e.jsx("option",{value:!1,children:"False"})]})}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("input",{type:"date",value:r.DateOfBirth||"",onChange:p=>m({...r,DateOfBirth:p.target.value}),className:"w-full border p-2 rounded"})}),e.jsxs("td",{className:"border border-gray-200 p-2",children:[e.jsx("button",{className:"text-green-400 px-3 py-1 rounded mr-2",onClick:g,children:"Save"}),e.jsx("button",{className:"text-red-400 px-3 py-1 rounded",onClick:()=>i(null),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border border-gray-200 p-2",children:x+1}),e.jsx("td",{className:"border border-gray-200 p-2",children:h.FullName}),e.jsx("td",{className:"border border-gray-200 p-2",children:h.Email}),e.jsx("td",{className:"border border-gray-200 p-2",children:h.MobileNumber}),e.jsx("td",{className:"border border-gray-200 p-2",children:h.isAdmin?"True":"False"}),e.jsx("td",{className:"border border-gray-200 p-2",children:h.DateOfBirth}),e.jsxs("td",{className:"border border-gray-200 p-2",children:[e.jsx("button",{className:"text-green-400 px-3 py-1 rounded mr-2",onClick:()=>N(h),children:"Edit"}),e.jsx("button",{className:"text-red-400 px-3 py-1 rounded",onClick:()=>a(h._id),children:"Delete"})]})]})},h._id))})]})})]})},X=j=>{const[f,d]=u.useState([]),[k,i]=u.useState(!1),[r,m]=u.useState(null),a=JSON.parse(localStorage.getItem("userInfo")),g={headers:{Authorization:`Bearer ${a==null?void 0:a.token}`}},h=async()=>{i(!0),m(null);try{const _=await J.get(j);d(_.data.data)}catch(_){m(_.message)}finally{i(!1)}},x=async _=>{i(!0),m(null);try{return(await J.get(`${j}/${_}`)).data.data}catch(o){m(o.message)}finally{i(!1)}},p=async _=>{try{await J.delete(`${j}/${_}`,g),d(o=>o.filter(P=>P._id!==_))}catch(o){m(o.message)}},M=async(_,o)=>{try{const P=await J.put(`${j}/${_}`,o,g);d(H=>H.map(R=>R._id===_?P.data.data:R)),h()}catch(P){m(P.message)}},D=async _=>{try{const o=await J.post(j,_,g);d(P=>[...P,o.data.data]),h()}catch(o){m(o.message)}};return u.useEffect(()=>{h()},[j]),{data:f,loading:k,error:r,fetchData:h,fetchById:x,deleteById:p,updateById:M,addNew:D}};function te({image:j,handleCloseModal:f}){const d=u.useRef(null);return e.jsx("div",{onClick:k=>{d.current.contains(k.target)||f()},className:"fixed top-0 cursor-pointer left-0 w-full h-full flex justify-center items-center backdrop-blur-sm",children:e.jsx("div",{ref:d,style:{width:`${j==null?void 0:j.images.original.width}`,height:`${j==null?void 0:j.images.original.height}`},className:"cursor-default",children:e.jsx("img",{src:j==null?void 0:j.images.original.url,alt:"Continent",className:"w-full h-full object-cover"})})})}function se({type:j,handleSelectionChange:f,addLocation:d,list:k,newLocation:i,setNewLocation:r,closeModal:m}){var h;const a=u.useRef(null),g={continent:{title:"Add New Continent",namePlaceholder:"Continent Name",photoPlaceholder:"Continent Photo URL",listLabel:"Countries",nameKey:"ContinentName",photoUrlKey:"ContinentPhotoUrl",displayKey:"CountryName"},country:{title:"Add New Country",namePlaceholder:"Country Name",photoPlaceholder:"Country Photo URL",listLabel:"States",nameKey:"CountryName",photoUrlKey:"CountryPhotoUrl",displayKey:"StateName"},state:{title:"Add New State",namePlaceholder:"State Name",photoPlaceholder:"State Photo URL",listLabel:"Cities",nameKey:"StateName",photoUrlKey:"StatePhotoUrl",displayKey:"CityName"}}[j];return e.jsx("div",{onClick:x=>{a.current&&!a.current.contains(x.target)&&m()},className:"fixed top-0 left-0 w-full h-full flex justify-center items-center backdrop-blur-sm bg-black bg-opacity-50 z-50",children:e.jsxs("div",{ref:a,className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-max",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:g.title}),e.jsx("input",{type:"text",placeholder:g.namePlaceholder,value:i[g.nameKey],onChange:x=>r({...i,[g.nameKey]:x.target.value}),className:"border p-2 rounded w-full mb-4"}),e.jsx("input",{type:"text",placeholder:g.photoPlaceholder,value:i[g.photoUrlKey],onChange:x=>r({...i,[g.photoUrlKey]:x.target.value}),className:"border p-2 rounded w-full mb-4"}),j!=="state"&&k&&e.jsx("div",{className:"relative inline-block w-full mb-4",children:e.jsx("select",{multiple:!0,onChange:f,className:"appearance-none w-full bg-gray-100 border border-gray-300 text-gray-700 py-2 px-3 pr-8 rounded leading-tight focus:outline-none focus:border-med-green",children:k==null?void 0:k.map(x=>e.jsx("option",{value:x._id,children:x[g.displayKey]},x._id))})}),j!=="state"&&k&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2 w-full",children:(h=i[g.listLabel])==null?void 0:h.map((x,p)=>{const M=k==null?void 0:k.find(D=>D._id===x._id);return M&&e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 py-1 px-3 rounded-full text-sm",children:M[g.displayKey]},p)})}),e.jsxs("div",{className:"mt-4 flex justify-end gap-4",children:[e.jsx("button",{onClick:m,className:"bg-gray-300 text-black px-4 py-2 rounded",children:"Cancel"}),e.jsxs("button",{onClick:d,className:"bg-green-400 text-white px-4 py-2 rounded",children:["Add ",g.title.split(" ")[2]," "]})]})]})})}const Y=({message:j,onConfirm:f,onCancel:d})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[e.jsx("p",{className:"text-lg mb-4",children:j}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:d,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{onClick:f,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Confirm"})]})]})});function ie(){const j="https://trippo-bazzar-backend.vercel.app/api/continent",{data:f,loading:d,error:k,deleteById:i,updateById:r,addNew:m}=X(j),{data:a}=Q("https://trippo-bazzar-backend.vercel.app/api/country"),[N,g]=u.useState({ContinentName:"",ContinentPhotoUrl:"",Countries:[]}),[h,x]=u.useState(null),[p,M]=u.useState({}),[D,_]=u.useState(null),[o,P]=u.useState(!1),[H,R]=u.useState(null),[T,v]=u.useState(!1),b=ee(),U=c=>{x(c._id),M({...c})},$=async()=>{try{await r(h,p)}catch(c){console.log(c)}x(null)},A=async()=>{try{await m(N),g({ContinentName:"",ContinentPhotoUrl:"",Countries:[]}),v(!1)}catch(c){console.log(c)}},L=c=>{R(c),P(!0)},E=()=>{P(!1)},F=()=>{v(!0)},K=()=>{v(!1),g({ContinentName:"",ContinentPhotoUrl:"",Countries:[]})},V=(c,t)=>{b(`/adminpanel/destination/${t}/${c}`)},O=c=>{const t=c.target.value;if(t){const l=a.find(n=>n._id===t);l&&(h?M(n=>({...n,Countries:n.Countries?[...n.Countries,l]:[l]})):g(n=>({...n,Countries:n.Countries?[...n.Countries,l]:[l]})))}},W=(c,t)=>{_({message:`Are you sure you want to delete this continent ${t}?`,onConfirm:()=>{i(c),_(null)},onCancel:()=>_(null)})};return d===!0?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[D&&e.jsx(Y,{message:D.message,onConfirm:D.onConfirm,onCancel:D.onCancel}),e.jsxs("div",{className:"mr-1 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-med-green font-bold text-xl",children:"Add New Continent"}),e.jsx("button",{onClick:F,className:"bg-med-green text-white rounded-lg px-6 py-2 hover:bg-green-600 transition-all duration-300 shadow-lg focus:outline-none focus:ring-2 focus:ring-green-300",children:"Add Continent"})]}),T&&e.jsx(se,{type:"continent",handleSelectionChange:O,addLocation:A,list:a,newLocation:N,setNewLocation:g,closeModal:K})]}),e.jsxs("div",{className:"mb-6 flex justify-between",children:[e.jsxs("p",{className:"text-med-green font-bold",children:["Total data: ",f==null?void 0:f.length]}),e.jsx("p",{className:"text-med-green font-bold",children:"Destination"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Sr."}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"ContinentName"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"ContinentPhoto"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Countries"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:f==null?void 0:f.map((c,t)=>e.jsx("tr",{className:"border-b border-gray-200",children:h===c._id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border border-gray-200 p-2",children:t+1}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("input",{type:"text",value:p.ContinentName||"",onChange:l=>M({...p,ContinentName:l.target.value}),className:"w-full border p-2 rounded"})}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("input",{type:"text",value:p.ContinentPhotoUrl||"",onChange:l=>M({...p,ContinentPhotoUrl:l.target.value}),className:"w-full border p-2 rounded"})}),e.jsxs("td",{className:"border border-gray-200 p-2",children:[p.Countries&&p.Countries.length>0?p.Countries.map((l,n)=>e.jsx("div",{className:"inline-flex items-center mb-2 mr-2",children:e.jsxs("span",{className:"inline-block relative bg-blue-100 text-blue-800 py-1 px-3 rounded-full text-sm mr-2 mb-2",children:[l.CountryName,e.jsx("button",{className:"text-red-500 absolute -top-1 -right-1 bg-red-300 rounded-full w-4 h-4 flex justify-center items-center",onClick:()=>{const y=p.Countries.filter((z,s)=>s!==n);M({...p,Countries:y})},children:"x"})]},l._id)},n)):e.jsx("span",{children:"No countries"}),e.jsx("div",{className:"mt-2",children:e.jsxs("select",{onChange:O,className:"border px-2 py-1 rounded-full bg-gray-100 text-sm",children:[e.jsx("option",{value:"",children:"Select Country"}),a==null?void 0:a.map(l=>e.jsx("option",{value:l._id,children:l.CountryName},l._id))]})})]}),e.jsxs("td",{className:"border border-gray-200 p-2",children:[e.jsx("button",{className:"text-green-400 px-3 py-1 rounded mr-2",onClick:$,children:"Save"}),e.jsx("button",{className:"text-red-400 px-3 py-1 rounded",onClick:()=>x(null),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border border-gray-200 p-2",children:t+1}),e.jsx("td",{onClick:()=>{V(c._id,c==null?void 0:c.ContinentName)},className:"border border-gray-200 p-2",children:c==null?void 0:c.ContinentName}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("img",{src:c==null?void 0:c.ContinentPhotoUrl,alt:"continentImage",onClick:()=>L(c==null?void 0:c.ContinentPhotoUrl),className:"w-40 h-20 cursor-pointer"})}),e.jsx("td",{className:"border border-gray-200 p-2",children:(c==null?void 0:c.Countries.length)>0?c.Countries.map(l=>e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 py-1 px-3 rounded-full text-sm mr-2 mb-2",children:l.CountryName},l._id)):e.jsx("span",{children:"No countries"})}),e.jsxs("td",{className:"border border-gray-200 p-2",children:[e.jsx("button",{className:"text-green-400 px-3 py-1 rounded mr-2",onClick:()=>U(c),children:"Edit"}),e.jsx("button",{className:"text-red-400 px-3 py-1 rounded",onClick:()=>W(c._id,c.ContinentName),children:"Delete"})]})]})},c._id||t))})]})}),o&&e.jsx(te,{image:{images:{original:{url:H}}},handleCloseModal:E})]})]})}function de(){const j="https://trippo-bazzar-backend.vercel.app/api/country",{data:f,loading:d,error:k,deleteById:i,updateById:r,addNew:m}=X(j),{data:a}=Q("https://trippo-bazzar-backend.vercel.app/api/state"),[N,g]=u.useState({CountryName:"",CountryPhotoUrl:"",States:[]}),[h,x]=u.useState(null),[p,M]=u.useState({}),[D,_]=u.useState(!1),[o,P]=u.useState(null),[H,R]=u.useState(!1),[T,v]=u.useState(null),b=ee(),U=c=>{x(c._id),M({...c})},$=async()=>{try{await r(h,p)}catch(c){console.log(c)}x(null)},A=async()=>{try{await m(N),g({CountryName:"",CountryPhotoUrl:"",States:[]}),R(!1)}catch(c){console.log(c)}},L=c=>{P(c),_(!0)},E=()=>{_(!1)},F=()=>{R(!0)},K=()=>{R(!1),g({CountryName:"",CountryPhotoUrl:"",States:[]})},V=(c,t)=>{b(`/adminpanel/destination/${t}/${c}`)},O=c=>{const t=c.target.value;if(t){const l=a.find(n=>n._id===t);l&&(h?M(n=>({...n,States:n.States?[...n.States,l]:[l]})):g(n=>({...n,States:n.States?[...n.States,l]:[l]})))}},W=(c,t)=>{v({message:`Are you sure you want to delete this country ${t}?`,onConfirm:()=>{i(c),v(null)},onCancel:()=>v(null)})};return d===!0?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[T&&e.jsx(Y,{message:T.message,onConfirm:T.onConfirm,onCancel:T.onCancel}),e.jsxs("div",{className:"mr-1 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-med-green font-bold text-xl",children:"Add New Country"}),e.jsx("button",{onClick:F,className:"bg-med-green text-white rounded-lg px-6 py-2 hover:bg-green-600 transition-all duration-300 shadow-lg focus:outline-none focus:ring-2 focus:ring-green-300",children:"Add Country"})]}),H&&e.jsx(se,{type:"country",handleSelectionChange:O,addLocation:A,list:a,newLocation:N,setNewLocation:g,closeModal:K})]}),e.jsxs("div",{className:"mb-6 flex justify-between",children:[e.jsxs("p",{className:"text-med-green font-bold",children:["Total data: ",f==null?void 0:f.length]}),e.jsx("p",{className:"text-med-green font-bold",children:"Destination"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Sr."}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"CountryName"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"CountryPhoto"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"States"}),e.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:f==null?void 0:f.map((c,t)=>e.jsx("tr",{className:"border-b border-gray-200",children:h===c._id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border border-gray-200 p-2",children:t+1}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("input",{type:"text",value:p.CountryName||"",onChange:l=>M({...p,CountryName:l.target.value}),className:"w-full border p-2 rounded"})}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("input",{type:"text",value:p.CountryPhotoUrl||"",onChange:l=>M({...p,CountryPhotoUrl:l.target.value}),className:"w-full border p-2 rounded"})}),e.jsxs("td",{className:"border border-gray-200 p-2",children:[p.States&&p.States.length>0?p.States.map((l,n)=>e.jsx("div",{className:"inline-flex items-center mb-2 mr-2",children:e.jsxs("span",{className:"inline-block relative bg-blue-100 text-blue-800 py-1 px-3 rounded-full text-sm mr-2 mb-2",children:[l.StateName,e.jsx("button",{className:"text-red-500 absolute -top-1 -right-1 bg-red-300 rounded-full w-4 h-4 flex justify-center items-center",onClick:()=>{const y=p.States.filter((z,s)=>s!==n);M({...p,States:y})},children:"x"})]},l._id)},n)):e.jsx("span",{children:"No States"}),e.jsx("div",{className:"mt-2",children:e.jsxs("select",{onChange:O,className:"border px-2 py-1 rounded-full bg-gray-100 text-sm",children:[e.jsx("option",{value:"",children:"Select State"}),a==null?void 0:a.map(l=>e.jsx("option",{value:l._id,children:l.StateName},l._id))]})})]}),e.jsxs("td",{className:"border border-gray-200 p-2",children:[e.jsx("button",{className:"text-green-400 px-3 py-1 rounded mr-2",onClick:$,children:"Save"}),e.jsx("button",{className:"text-red-400 px-3 py-1 rounded",onClick:()=>x(null),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border border-gray-200 p-2",children:t+1}),e.jsx("td",{onClick:()=>{V(c._id,c==null?void 0:c.CountryName)},className:"border border-gray-200 p-2",children:c==null?void 0:c.CountryName}),e.jsx("td",{className:"border border-gray-200 p-2",children:e.jsx("img",{src:c==null?void 0:c.CountryPhotoUrl,alt:"continentImage",onClick:()=>L(c==null?void 0:c.CountryPhotoUrl),className:"w-40 h-20 cursor-pointer"})}),e.jsx("td",{className:"border border-gray-200 p-2",children:(c==null?void 0:c.States.length)>0?c.States.map(l=>e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 py-1 px-3 rounded-full text-sm mr-2 mb-2",children:l.StateName},l._id)):e.jsx("span",{children:"No states"})}),e.jsxs("td",{className:"border border-gray-200 p-2",children:[e.jsx("button",{className:"text-green-400 px-3 py-1 rounded mr-2",onClick:()=>U(c),children:"Edit"}),e.jsx("button",{className:"text-red-400 px-3 py-1 rounded",onClick:()=>W(c._id,c.CountryName),children:"Delete"})]})]})},c._id||t))})]})}),D&&e.jsx(te,{image:{images:{original:{url:o}}},handleCloseModal:E})]})]})}function he({addNew:j,allStateData:f,deleteState:d,setSelectedId:k,openModal:i}){const[r,m]=u.useState(!1),[a,N]=u.useState({StateName:"",StatePhotoUrl:"",Packages:[]}),[g,h]=u.useState(!1),[x,p]=u.useState(null),M=()=>{m(!1),N({StateName:"",StatePhotoUrl:""})},D=()=>{m(!0)},_=async()=>{try{h(!0),await j(a),N({StateName:"",StatePhotoUrl:"",Packages:[]}),m(!1)}catch(P){console.log(P)}finally{h(!1)}},o=(P,H)=>{p({message:`Are you sure you want to delete this ${H}?`,onConfirm:()=>{d(P),p(null)},onCancel:()=>p(null)})};return g===!0?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[x&&e.jsx(Y,{message:x.message,onConfirm:x.onConfirm,onCancel:x.onCancel}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-med-green font-bold text-xl",children:"Add New State"}),e.jsxs("button",{onClick:D,className:"bg-med-green text-white rounded-lg px-6 py-2 hover:bg-green-600 transition-all duration-300 shadow-lg focus:outline-none focus:ring-2 focus:ring-green-300",disabled:g,children:[g?"Adding...":"Add State"," "]})]}),r&&e.jsx(se,{type:"state",addLocation:_,newLocation:a,setNewLocation:N,closeModal:M})]}),f==null?void 0:f.map((P,H)=>e.jsx("div",{children:e.jsx("ul",{className:"flex flex-col",children:e.jsxs("li",{className:"relative flex items-center justify-between mb-3 text-med-green rounded-lg overflow-hidden transition-colors ease-in-out duration-300 bg-white p-4",children:[e.jsx("span",{onClick:()=>k(P._id),className:"text-left cursor-pointer text-xl font-semibold",children:P==null?void 0:P.StateName}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:P==null?void 0:P.StatePhotoUrl,onClick:()=>i(P==null?void 0:P.StatePhotoUrl),alt:"state icon",className:"w-10 h-5 cursor-pointer object-cover rounded ml-4"}),e.jsx("button",{onClick:()=>o(P._id,P.StateName),className:"text-red-600",children:"Delete"})]})]})})},H))]})}function ue(){var $;const[j,f]=u.useState(),[d,k]=u.useState([]),[i,r]=u.useState(null),[m,a]=u.useState({}),[N,g]=u.useState(!1),[h,x]=u.useState(null),{data:p,loading:M}=Q("https://trippo-bazzar-backend.vercel.app/api/package"),D="https://trippo-bazzar-backend.vercel.app/api/state",{data:_,deleteById:o,updateById:P,addNew:H}=X(D);u.useEffect(()=>{j&&(async()=>{const E=await(await fetch(`https://trippo-bazzar-backend.vercel.app/api/state/${j}`)).json();k(E.data)})()},[j]);const R=A=>{r(A._id),a({...A})},T=async()=>{const A={...m,Packages:m.Packages.map(L=>typeof L=="object"?L._id:L)};try{await P(i,A),r(null),k(m)}catch(L){console.log(L)}},v=A=>{x(A),g(!0)},b=A=>{o(A)},U=()=>{g(!1)};return console.log(p),M?e.jsx(q,{}):e.jsxs("div",{children:[j?e.jsx(e.Fragment,{children:i===d._id?e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("input",{type:"text",name:"StateName",value:m.StateName,onChange:A=>a({...m,StateName:A.target.value}),className:"mb-3 p-2 text-2xl font-semibold text-med-green bg-light-gray rounded-md shadow-sm"}),e.jsx("input",{type:"text",name:"StatePhotoUrl",value:m.StatePhotoUrl,onChange:A=>a({...m,StatePhotoUrl:A.target.value}),className:"mb-5 p-2 text-lg text-gray-600 bg-light-gray rounded-md shadow-sm"}),m.Packages&&m.Packages.length>0?m.Packages.map((A,L)=>e.jsx("div",{className:"inline-flex items-center  mb-2 mr-2",children:e.jsxs("span",{className:"inline-block relative bg-blue-100 text-blue-800 py-1 px-3 rounded-full text-sm mr-4",children:[A.title,e.jsx("button",{className:"text-red-500 absolute -top-1 -right-1 bg-red-300 rounded-full w-4 h-4 flex justify-center items-center",onClick:()=>{const E=m.Packages.filter(F=>F._id!==A._id);a({...m,Packages:E})},children:"x"})]},A._id)},L)):e.jsx("p",{className:"mb-4",children:"No Packages selected."}),e.jsx("div",{className:"mb-2 w-full",children:e.jsx("ul",{className:"w-full",children:p==null?void 0:p.map(A=>e.jsxs("li",{className:"cursor-pointer list-decimal p-2 w-full bg-gray-100 rounded-md hover:bg-gray-200",onClick:()=>{m.Packages.some(L=>L._id===A._id)||a({...m,Packages:[...m.Packages,A]})},children:[e.jsx("span",{className:"mr-4",children:A.title}),e.jsxs("span",{className:"text-gray-600",children:["[",A.description,"]"]})]},A._id))})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{r(null)},className:"px-4 py-2 bg-red-700 text-xs text-white font-semibold rounded-md hover:underline transition-all duration-300",children:"Cancel"}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-med-green text-xs text-white font-semibold rounded-md hover:underline transition-all duration-300",children:"Save Changes"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-8 bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col items-start max-w-xl",children:[e.jsx("h1",{className:"mb-5 font-semibold text-7xl text-med-green italic text-left bg-light-gray p-6 rounded-lg shadow-md",children:d.StateName}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("button",{onClick:()=>{R(d)},className:"px-4 py-2 bg-blue-500 text-xs text-white font-semibold rounded-md hover:underline transition-all duration-300",children:"Edit State"}),e.jsx("button",{onClick:()=>{f(null)},className:"px-4 py-2 bg-red-700 text-xs text-white font-semibold rounded-md hover:underline transition-all duration-300",children:"Back"})]})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:d.StatePhotoUrl,alt:d.StateName,className:"max-w-xl h-auto rounded-lg shadow-lg transition-all duration-300 transform hover:scale-105"})})]}),e.jsxs("div",{className:"flex flex-col bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("div",{children:e.jsx("p",{className:"font-semibold italic text-med-green mb-4",children:"All Packages"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ",children:($=d==null?void 0:d.Packages)==null?void 0:$.map((A,L)=>{var E;return e.jsxs("div",{className:" rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300",children:[e.jsx("div",{className:"w-full h-32 p-0",children:e.jsx("img",{src:A.MainPhotos[0],alt:A.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:A.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:A.description}),e.jsxs("p",{className:"text-med-green font-bold mb-4",children:["Rs",A.price]}),e.jsx("ul",{className:"mb-4 flex flex-wrap gap-4 text-gray-600",children:(E=A.whatsIncluded)==null?void 0:E.map((F,K)=>e.jsx("li",{children:F},K))}),e.jsx("div",{className:"flex justify-between",children:e.jsx("button",{className:"bg-med-green text-white rounded-lg w-full py-2 hover:bg-green-600 transition-all duration-300",children:"View More"})})]})]},L)})})]})]})}):e.jsx(he,{deleteState:b,allStateData:_,addNew:H,setSelectedId:f,openModal:v}),N&&e.jsx(te,{image:{images:{original:{url:h}}},handleCloseModal:U})]})}function xe({initialData:j,updateById:f,id:d,setSelectedId:k,setEditPackage:i}){var l,n,y,z;const{data:r,loading:m}=Q("https://trippo-bazzar-backend.vercel.app/api/hotel"),[a,N]=u.useState(j||{title:"",description:"",price:0,whatsIncluded:[],coupon:[],photos:[],dayDescription:[],specialInstruction:"",conditionOfTravel:"",thingsToMaintain:"",hotels:[],policies:"",termsAndConditions:""}),[g,h]=u.useState(""),[x,p]=u.useState(""),[M,D]=u.useState(""),[_,o]=u.useState(""),[P,H]=u.useState(""),[R,T]=u.useState(!1),v=r==null?void 0:r.filter(s=>s.hotelName.toLowerCase().includes(_.toLowerCase())),b=["Food","Hotel","Car","Explore","Travel","Visa"],U=u.useRef([]);!r||r.length;const $=s=>{const{name:C,value:S}=s.target;N(w=>({...w,[C]:S}))},A=()=>{if(!g||!M)return;const s=r.find(S=>S._id===M),C={location:g,hotelDetails:[s._id]};N(S=>({...S,hotels:[...S.hotels,C]})),h("")},L=s=>{const C=a.hotels.filter(S=>S._id!==s);N(S=>({...S,hotels:C}))},E=(s,C)=>{var w;if(!(a!=null&&a.hotels)||!((w=a.hotels[s])!=null&&w.hotelDetails))return;const S=[...a.hotels];S[s].hotelDetails.splice(C,1),N(I=>({...I,hotels:S}))},F=s=>{const C=r==null?void 0:r.find(S=>S._id===x);if(C){const S=a.hotels.findIndex(w=>w._id===s);if(S!==-1&&!a.hotels[S].hotelDetails.some(I=>I===C._id)){const I=[...a.hotels];I[S]={...a.hotels[S],hotelDetails:[...a.hotels[S].hotelDetails,C._id]},N(B=>({...B,hotels:I}))}}},K=async()=>{try{await f(d,a),k(null),i(!1),N({title:"",description:"",price:0,whatsIncluded:[],coupon:[],photos:[],dayDescription:[],specialInstruction:"",conditionOfTravel:"",thingsToMaintain:"",hotels:[],policies:"",termsAndConditions:""})}catch(s){console.log(s)}},V=(s,C,S,w)=>{N(I=>{const B=[...I[s]];return B[C][S]=w,{...I,[s]:B}})},O=(s,C,S)=>{N(w=>{const I=[...w.dayDescription];return console.log(S),S===""?I[s].photos=I[s].photos.filter((B,Z)=>Z!==C):I[s].photos[C]=S,{...w,dayDescription:I}})},W=(s,C)=>{N(S=>{const w=[...S.MainPhotos];return w[s]=C,{...S,MainPhotos:w}})},c=(s,C)=>{N(S=>{const w=[...S.hotels];return C===""?w.splice(s,1):w[s]={...w[s],location:C},{...S,hotels:w}})},t=()=>{U.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=`${s.scrollHeight}px`)})};return u.useEffect(()=>{t()},[a]),e.jsx("div",{className:"bg-gray-50 text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("section",{className:"mb-8 flex flex-col",children:[e.jsx("input",{type:"text",name:"title",value:a.title,onChange:$,className:"text-4xl font-bold mb-2"}),e.jsx("textarea",{name:"description",value:a.description,onChange:$,className:"text-lg mb-4"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:$,className:"text-xl font-semibold text-green-600"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Main Photos"}),(l=a==null?void 0:a.MainPhotos)==null?void 0:l.map((s,C)=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",value:s,onChange:S=>W(C,S.target.value),className:"w-full",placeholder:`Main Photo URL ${C+1}`}),e.jsx("button",{type:"button",onClick:()=>{const S=[...a.MainPhotos];S.splice(C,1),N(w=>({...w,MainPhotos:S}))},className:"text-red-500 ml-2",children:"Remove"})]},C)),e.jsx("button",{type:"button",onClick:()=>{N(s=>({...s,MainPhotos:[...s.MainPhotos,""]}))},className:"bg-blue-500 text-white px-4 py-2 rounded-lg mt-2",children:"Add Main Photo"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Day Description"}),(n=a==null?void 0:a.dayDescription)==null?void 0:n.map((s,C)=>{var S;return e.jsxs("div",{className:"mb-6",children:[e.jsx("input",{type:"text",name:`dayTitle-${C}`,value:s.dayTitle,onChange:w=>V("dayDescription",C,"dayTitle",w.target.value),className:"text-xl font-semibold mb-2 w-full",placeholder:`Day ${C+1} Title`}),e.jsx("textarea",{name:`dayDetails-${C}`,value:s.dayDetails,onChange:w=>V("dayDescription",C,"dayDetails",w.target.value),ref:w=>U.current[C]=w,className:"text-gray-700 mb-4 w-full resize-none overflow-hidden",style:{minHeight:"3rem"},placeholder:`Details for Day ${C+1}`}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:(S=s==null?void 0:s.photos)==null?void 0:S.map((w,I)=>e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"text",value:w,onChange:B=>O(C,I,B.target.value),className:"w-full",placeholder:`Photo URL for Day ${C+1} - Photo ${I+1}`})},I))}),e.jsx("button",{type:"button",onClick:()=>{const w=[...a.dayDescription];w[C].photos.push(""),N(I=>({...I,dayDescription:w}))},className:"bg-blue-500 text-white px-4 py-2 rounded-lg mt-2",children:"Add Photo"}),e.jsxs("button",{type:"button",onClick:()=>{const w=a.dayDescription.filter(I=>I._id!==s._id);N(I=>({...I,dayDescription:w}))},className:"bg-red-500 ml-2 text-white px-4 py-2 rounded-lg mt-2",children:["Remove this Day-",C+1]})]},C)}),e.jsx("button",{type:"button",onClick:()=>{const s={dayTitle:"",dayDetails:"",photos:[""]};N(C=>({...C,dayDescription:[...C.dayDescription,s]}))},className:"bg-green-500 text-white px-4 py-2 rounded-lg mt-4",children:"Add Another Day"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"What's Included"}),e.jsx("ul",{className:" flex items-center gap-3",children:(y=a==null?void 0:a.whatsIncluded)==null?void 0:y.map((s,C)=>e.jsxs("li",{className:"bg-blue-200 relative text-blue-800 px-3 py-1 rounded-lg",children:[s,e.jsx("button",{className:"text-red-500 absolute -top-1 -right-1 bg-red-300 rounded-full w-4 h-4 flex justify-center items-center",onClick:()=>{const S=a.whatsIncluded.filter(w=>w!==s);N({...a,whatsIncluded:S})},children:"x"})]},C))}),e.jsx("div",{className:"mb-2 w-full",children:e.jsx("ul",{className:"w-full",children:b==null?void 0:b.map((s,C)=>e.jsx("li",{className:"cursor-pointer list-decimal p-2 w-full bg-gray-100 rounded-md hover:bg-gray-200",onClick:()=>{a.whatsIncluded.some(S=>S===s)||N({...a,whatsIncluded:[...a.whatsIncluded,s]})},children:e.jsx("span",{className:"mr-4",children:s})},C))})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Special Instructions"}),e.jsx("textarea",{name:"specialInstruction",value:a.specialInstruction,onChange:s=>{$(s),t()},ref:s=>U.current.push(s),className:"text-gray-700 whitespace-pre-line w-full resize-none overflow-hidden"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Conditions of Travel"}),e.jsx("textarea",{name:"conditionOfTravel",value:a.conditionOfTravel,onChange:$,ref:s=>U.current.push(s),className:"text-gray-700 whitespace-pre-line w-full"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Things to maintain"}),e.jsx("textarea",{name:"thingsToMaintain",value:a.thingsToMaintain,onChange:s=>{$(s),t()},ref:s=>U.current.push(s),className:"text-gray-700 whitespace-pre-line w-full resize-none overflow-hidden"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Policies"}),e.jsx("textarea",{name:"policies",value:a.policies,ref:s=>U.current.push(s),onChange:$,className:"text-gray-700 whitespace-pre-line w-full"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Hotels"}),(z=a==null?void 0:a.hotels)==null?void 0:z.map((s,C)=>{var S;return e.jsxs("div",{className:"flex flex-col mb-4 gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("input",{type:"text",value:s.location,onChange:w=>c(C,w.target.value),className:"border p-2 rounded"}),e.jsx("button",{onClick:()=>L(s._id),className:"text-red-500 bg-red-200 rounded px-2 py-1",children:"Remove Hotel"})]}),e.jsx("ul",{children:((S=s==null?void 0:s.hotelDetails)==null?void 0:S.length)>0?s.hotelDetails.map((w,I)=>{const B=r==null?void 0:r.find(Z=>Z._id===w);return e.jsxs("li",{className:"bg-blue-100 text-blue-800 p-2 rounded-md mb-2",children:[(B==null?void 0:B.hotelName)||` ${w.hotelName}`," ",e.jsx("button",{className:"text-red-500 ml-2",onClick:()=>E(C,I),children:"x"})]},I)}):e.jsx("li",{children:"No hotel details available"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",placeholder:"Search and select a hotel",className:"border p-2 w-full rounded",value:P,onChange:w=>{H(w.target.value),T(!0)}}),R&&P&&e.jsxs("ul",{className:"absolute bg-white border rounded mt-2 w-full max-h-40 overflow-y-auto z-10",children:[r==null?void 0:r.filter(w=>w.hotelName.toLowerCase().includes(P.toLowerCase())).map(w=>e.jsx("li",{onClick:()=>{p(w._id),H(w.hotelName),T(!1)},className:"p-2 hover:bg-gray-100 cursor-pointer",children:w.hotelName},w._id)),(r==null?void 0:r.filter(w=>w.hotelName.toLowerCase().includes(P.toLowerCase())).length)===0&&e.jsx("li",{className:"p-2 text-gray-500",children:"No results found"})]})]}),e.jsx("button",{onClick:()=>{F(s._id),H("")},className:"bg-blue-500 text-white px-4 py-2 rounded mt-2",disabled:!x,children:"Add Detail"})]})]},C)}),e.jsxs("div",{className:"mt-6 border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add New Hotel"}),e.jsx("input",{type:"text",value:g,onChange:s=>h(s.target.value),placeholder:"Enter location",className:"border p-2 w-full mb-2"}),e.jsxs("div",{className:"relative w-full mb-2",children:[e.jsx("input",{type:"text",value:_,onFocus:()=>T(!0),onChange:s=>o(s.target.value),placeholder:"Search and select a hotel",className:"border p-2 rounded w-full"}),R&&_&&(v==null?void 0:v.length)>0&&e.jsx("ul",{className:"absolute bg-white border rounded w-full max-h-40 overflow-y-auto mt-1 z-10",children:v.map(s=>e.jsx("li",{onClick:()=>{D(s._id),o(s.hotelName),T(!1)},className:"p-2 hover:bg-gray-200 cursor-pointer",children:s.hotelName},s._id))})]}),e.jsx("button",{onClick:A,className:"bg-blue-500 text-white px-4 py-2 rounded-lg mt-2",children:"Add Hotel"})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Terms and Conditions"}),e.jsx("textarea",{name:"termsAndConditions",value:a.termsAndConditions,ref:s=>U.current.push(s),onChange:$,className:"text-gray-700 whitespace-pre-line w-full"})]}),e.jsx("button",{onClick:K,className:"bg-blue-500 text-white px-4 py-2 rounded-lg",children:"Save"}),e.jsx("button",{onClick:()=>{i(!1)},className:"bg-red-500 ml-4 text-white px-4 py-2 rounded-lg",children:"Back"})]})})}const me=({addNew:j,setIsAddingPackage:f})=>{var W,c;const{data:d,loading:k}=Q("https://trippo-bazzar-backend.vercel.app/api/hotel"),[i,r]=u.useState({title:"",description:"",price:0,whatsIncluded:[],coupon:[],MainPhotos:[],dayDescription:[],specialInstruction:"",conditionOfTravel:"",thingsToMaintain:"",hotels:[],policies:"",termsAndConditions:""}),[m,a]=u.useState(""),[N,g]=u.useState(""),[h,x]=u.useState(""),[p,M]=u.useState(""),[D,_]=u.useState(""),[o,P]=u.useState(!1),H=d==null?void 0:d.filter(t=>t.hotelName.toLowerCase().includes(p.toLowerCase())),R=["Food","Hotel","Car","Explore","Travel","Visa"],T=u.useRef([]),v=t=>{const{name:l,value:n}=t.target;r(y=>({...y,[l]:n}))},b=()=>{if(!m||!h)return;const t=d.find(n=>n._id===h),l={location:m,hotelDetails:[t._id]};r(n=>({...n,hotels:[...n.hotels,l]})),a("")},U=t=>{const l=i.hotels.filter(n=>n._id!==t);r(n=>({...n,hotels:l}))},$=(t,l)=>{var y;if(!(i!=null&&i.hotels)||!((y=i.hotels[t])!=null&&y.hotelDetails))return;const n=[...i.hotels];n[t].hotelDetails.splice(l,1),r(z=>({...z,hotels:n}))},A=t=>{const l=d==null?void 0:d.find(n=>n._id===N);if(l){const n=i.hotels.findIndex(y=>y._id===t);if(n!==-1&&!i.hotels[n].hotelDetails.some(z=>z===l._id)){const z=[...i.hotels];z[n]={...i.hotels[n],hotelDetails:[...i.hotels[n].hotelDetails,l._id]},r(s=>({...s,hotels:z}))}}},L=async()=>{try{await j(i),f(!1),console.log(i),r({title:"",description:"",price:0,whatsIncluded:[],coupon:[],photos:[],dayDescription:[],specialInstruction:"",conditionOfTravel:"",thingsToMaintain:"",hotels:[],policies:"",termsAndConditions:""})}catch(t){console.log(t)}},E=(t,l,n,y)=>{r(z=>{const s=[...z[t]];return s[l][n]=y,{...z,[t]:s}})},F=(t,l,n)=>{r(y=>{const z=[...y.dayDescription];return console.log(n),n===""?z[t].photos=z[t].photos.filter((s,C)=>C!==l):z[t].photos[l]=n,{...y,dayDescription:z}})},K=(t,l)=>{r(n=>{const y=[...n.MainPhotos];return y[t]=l,{...n,MainPhotos:y}})},V=(t,l)=>{r(n=>{const y=[...n.hotels];return l===""?y.splice(t,1):y[t]={...y[t],location:l},{...n,hotels:y}})},O=()=>{T.current.forEach(t=>{t&&(t.style.height="auto",t.style.height=`${t.scrollHeight}px`)})};return e.jsx("div",{children:e.jsx("div",{className:"bg-gray-50 text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("section",{className:"mb-8 flex flex-col",children:[e.jsx("input",{type:"text",name:"title",placeholder:"PackageTitle",value:i.title,onChange:v,className:"text-4xl font-bold mb-2"}),e.jsx("textarea",{name:"description",placeholder:"description",value:i.description,onChange:v,className:"text-lg mb-4"}),e.jsx("input",{type:"number",name:"price",placeholder:"price of the package",value:i.price,onChange:v,className:"text-xl font-semibold text-green-600"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Main Photos"}),(W=i==null?void 0:i.MainPhotos)==null?void 0:W.map((t,l)=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",value:t,onChange:n=>K(l,n.target.value),className:"w-full",placeholder:`Main Photo URL ${l+1}`}),e.jsx("button",{type:"button",onClick:()=>{const n=[...i.MainPhotos];n.splice(l,1),r(y=>({...y,MainPhotos:n}))},className:"text-red-500 ml-2",children:"Remove"})]},l)),e.jsx("button",{type:"button",onClick:()=>{r(t=>({...t,MainPhotos:[...t.MainPhotos,""]}))},className:"bg-blue-500 text-white px-4 py-2 rounded-lg mt-2",children:"Add Main Photo"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Day Description"}),i.dayDescription.map((t,l)=>e.jsxs("div",{className:"mb-6",children:[e.jsx("input",{type:"text",name:`dayTitle-${l}`,value:t.dayTitle,onChange:n=>E("dayDescription",l,"dayTitle",n.target.value),className:"text-xl font-semibold mb-2 w-full",placeholder:`Day ${l+1} Title`}),e.jsx("textarea",{name:`dayDetails-${l}`,value:t.dayDetails,onChange:n=>E("dayDescription",l,"dayDetails",n.target.value),ref:n=>T.current[l]=n,className:"text-gray-700 mb-4 w-full resize-none overflow-hidden",style:{minHeight:"3rem"},placeholder:`Details for Day ${l+1}`}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:t.photos.map((n,y)=>e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"text",value:n,onChange:z=>F(l,y,z.target.value),className:"w-full",placeholder:`Photo URL for Day ${l+1} - Photo ${y+1}`})},y))}),e.jsx("button",{type:"button",onClick:()=>{const n=[...i.dayDescription];n[l].photos.push(""),r(y=>({...y,dayDescription:n}))},className:"bg-blue-500 text-white px-4 py-2 rounded-lg mt-2",children:"Add Photo"}),e.jsxs("button",{type:"button",onClick:()=>{const n=i.dayDescription.filter((y,z)=>z!==l);r(y=>({...y,dayDescription:n}))},className:"bg-red-500 ml-2 text-white px-4 py-2 rounded-lg mt-2",children:["Remove this Day-",l+1]})]},l)),e.jsx("button",{type:"button",onClick:()=>{const t={dayTitle:"",dayDetails:"",photos:[""]};r(l=>({...l,dayDescription:[...l.dayDescription,t]}))},className:"bg-green-500 text-white px-4 py-2 rounded-lg mt-4",children:"Add Another Day"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"What's Included"}),e.jsx("ul",{className:" flex items-center gap-3",children:i.whatsIncluded.map((t,l)=>e.jsxs("li",{className:"bg-blue-200 relative text-blue-800 px-3 py-1 rounded-lg",children:[t,e.jsx("button",{className:"text-red-500 absolute -top-1 -right-1 bg-red-300 rounded-full w-4 h-4 flex justify-center items-center",onClick:()=>{const n=i.whatsIncluded.filter(y=>y!==t);r({...i,whatsIncluded:n})},children:"x"})]},l))}),e.jsx("div",{className:"mb-2 w-full",children:e.jsx("ul",{className:"w-full",children:R==null?void 0:R.map((t,l)=>e.jsx("li",{className:"cursor-pointer list-decimal p-2 w-full bg-gray-100 rounded-md hover:bg-gray-200",onClick:()=>{i.whatsIncluded.some(n=>n===t)||r({...i,whatsIncluded:[...i.whatsIncluded,t]})},children:e.jsx("span",{className:"mr-4",children:t})},l))})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Special Instructions"}),e.jsx("textarea",{name:"specialInstruction",value:i.specialInstruction,onChange:t=>{v(t)},ref:t=>T.current.push(t),className:"text-gray-700 whitespace-pre-line w-full resize-none overflow-hidden"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Conditions of Travel"}),e.jsx("textarea",{name:"conditionOfTravel",value:i.conditionOfTravel,onChange:v,ref:t=>T.current.push(t),className:"text-gray-700 whitespace-pre-line w-full"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Things to maintain"}),e.jsx("textarea",{name:"thingsToMaintain",value:i.thingsToMaintain,onChange:t=>{v(t),O()},ref:t=>T.current.push(t),className:"text-gray-700 whitespace-pre-line w-full resize-none overflow-hidden"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Policies"}),e.jsx("textarea",{name:"policies",value:i.policies,ref:t=>T.current.push(t),onChange:v,className:"text-gray-700 whitespace-pre-line w-full"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Hotels"}),(c=i==null?void 0:i.hotels)==null?void 0:c.map((t,l)=>{var n;return e.jsxs("div",{className:"flex flex-col mb-4 gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("input",{type:"text",value:t.location,onChange:y=>V(l,y.target.value),className:"border p-2 rounded"}),e.jsx("button",{onClick:()=>U(t._id),className:"text-red-500 bg-red-200 rounded px-2 py-1",children:"Remove Hotel"})]}),e.jsx("ul",{children:((n=t==null?void 0:t.hotelDetails)==null?void 0:n.length)>0?t.hotelDetails.map((y,z)=>{const s=d==null?void 0:d.find(C=>C._id===y);return e.jsxs("li",{className:"bg-blue-100 text-blue-800 p-2 rounded-md mb-2",children:[(s==null?void 0:s.hotelName)||` ${y.hotelName}`," ",e.jsx("button",{className:"text-red-500 ml-2",onClick:()=>$(l,z),children:"x"})]},z)}):e.jsx("li",{children:"No hotel details available"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",placeholder:"Search and select a hotel",className:"border p-2 w-full rounded",value:D,onChange:y=>{_(y.target.value),P(!0)}}),o&&D&&e.jsxs("ul",{className:"absolute bg-white border rounded mt-2 w-full max-h-40 overflow-y-auto z-10",children:[d==null?void 0:d.filter(y=>y.hotelName.toLowerCase().includes(D.toLowerCase())).map(y=>e.jsx("li",{onClick:()=>{g(y._id),_(y.hotelName),P(!1)},className:"p-2 hover:bg-gray-100 cursor-pointer",children:y.hotelName},y._id)),(d==null?void 0:d.filter(y=>y.hotelName.toLowerCase().includes(D.toLowerCase())).length)===0&&e.jsx("li",{className:"p-2 text-gray-500",children:"No results found"})]})]}),e.jsx("button",{onClick:()=>{A(t._id),_("")},className:"bg-blue-500 text-white px-4 py-2 rounded mt-2",disabled:!N,children:"Add Detail"})]})]},l)}),e.jsxs("div",{className:"mt-6 border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add New Hotel"}),e.jsx("input",{type:"text",value:m,onChange:t=>a(t.target.value),placeholder:"Enter location",className:"border p-2 w-full mb-2"}),e.jsxs("div",{className:"relative w-full mb-2",children:[e.jsx("input",{type:"text",value:p,onFocus:()=>P(!0),onChange:t=>M(t.target.value),placeholder:"Search and select a hotel",className:"border p-2 rounded w-full"}),o&&p&&(H==null?void 0:H.length)>0&&e.jsx("ul",{className:"absolute bg-white border rounded w-full max-h-40 overflow-y-auto mt-1 z-10",children:H.map(t=>e.jsx("li",{onClick:()=>{x(t._id),M(t.hotelName),P(!1)},className:"p-2 hover:bg-gray-200 cursor-pointer",children:t.hotelName},t._id))})]}),e.jsx("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded-lg mt-2",children:"Add Hotel"})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Terms and Conditions"}),e.jsx("textarea",{name:"termsAndConditions",value:i.termsAndConditions,ref:t=>{t&&!T.current.includes(t)&&T.current.push(t)},onChange:v,className:"text-gray-700 whitespace-pre-line w-full"})]}),e.jsx("button",{onClick:L,className:"bg-blue-500 text-white px-4 py-2 rounded-lg",children:"Save"}),e.jsx("button",{onClick:()=>{f(!1)},className:"bg-red-500 ml-4 text-white px-4 py-2 rounded-lg",children:"Back"})]})})})};function pe(){var T,v;const[j,f]=u.useState(),[d,k]=u.useState(!1),[i,r]=u.useState(""),[m,a]=u.useState(null),[N,g]=u.useState(!1),h="https://trippo-bazzar-backend.vercel.app/api/package",{data:x,loading:p,deleteById:M,updateById:D,addNew:_}=X(h),{data:o,loading:P}=Q(`https://trippo-bazzar-backend.vercel.app/api/package/${j}`),H=x.filter(b=>{var U;return(U=b==null?void 0:b.title)==null?void 0:U.toLowerCase().includes(i.toLowerCase())}),R=(b,U)=>{a({message:`Are you sure you want to delete this ${U}?`,onConfirm:()=>{deleteState(b),a(null)},onCancel:()=>a(null)})};return p||P?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[m&&e.jsx(Y,{message:m.message,onConfirm:m.onConfirm,onCancel:m.onCancel}),j?e.jsx(e.Fragment,{children:N?e.jsx(xe,{setEditPackage:g,setSelectedId:f,id:j,updateById:D,initialData:o}):e.jsx("div",{className:"bg-gray-50 text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("section",{className:"mb-8 relative",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-4xl font-bold mb-2",children:o==null?void 0:o.title})}),e.jsx("p",{className:"text-lg mb-4",children:o==null?void 0:o.description}),e.jsxs("p",{className:"text-xl font-semibold text-green-600",children:["Price: Rs. ",o==null?void 0:o.price,"/-"]}),e.jsxs("div",{className:"absolute top-1 right-0 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>{g(!0)},className:"bg-blue-600 h-10 py-3 text-center flex items-center hover:scale-95 transition-transform ease-in-out duration-300 text-white font-medium rounded-full px-4",children:"Edit Package"}),e.jsx("button",{onClick:()=>{f(null)},className:"bg-red-600 h-10 py-3 text-center flex items-center hover:scale-95 transition-transform ease-in-out duration-300 text-white font-medium rounded-full px-4",children:"Back"})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"What's Included"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:o==null?void 0:o.whatsIncluded.map((b,U)=>e.jsx("li",{className:"text-gray-700",children:b},U))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Available Coupons"}),e.jsx("ul",{className:"flex space-x-2",children:o==null?void 0:o.coupon.map((b,U)=>e.jsx("li",{className:"bg-blue-200 text-blue-800 px-3 py-1 rounded-lg",children:b},U))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Photos"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:(T=o==null?void 0:o.MainPhotos)==null?void 0:T.map((b,U)=>e.jsx("img",{src:b,alt:`Tour photo ${U+1}`,className:"rounded-lg w-[400px] h-[300px] shadow-md"},U))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Itinerary"}),o==null?void 0:o.dayDescription.map((b,U)=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:b.dayTitle}),e.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-line",children:b.dayDetails}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:b==null?void 0:b.photos.map(($,A)=>e.jsx("img",{src:$,alt:`Day ${U+1} photo ${A+1}`,className:"rounded-lg w-full h-[300px] shadow-md"},A))})]},U))]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Special Instructions"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:o==null?void 0:o.specialInstruction})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Conditions of Travel"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:o==null?void 0:o.conditionOfTravel})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Things to Maintain"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:o==null?void 0:o.thingsToMaintain})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Hotels"}),(v=o==null?void 0:o.hotels)==null?void 0:v.map((b,U)=>{var $;return e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:b.location}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:($=b==null?void 0:b.hotelDetails)==null?void 0:$.map((A,L)=>e.jsx("li",{className:"text-gray-700",children:A.hotelName},L))})]},U)})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Policies"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:o==null?void 0:o.policies})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Terms and Conditions"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:o==null?void 0:o.termsAndConditions})]})]})})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>k(!d),className:"bg-green-600 h-10 py-3 text-center flex items-center hover:scale-95 transition-transform ease-in-out duration-300 text-white font-medium rounded-full px-4 mb-4",children:d?"Cancel":"Add Package"}),!d&&e.jsx("input",{type:"text",placeholder:"Search by Title",value:i,onChange:b=>r(b.target.value),className:"mb-4 p-2 border border-black outline-none rounded w-[85%]"})]}),d?e.jsx(me,{setIsAddingPackage:k,addNew:_}):e.jsx("div",{children:H==null?void 0:H.map((b,U)=>e.jsx("div",{children:e.jsx("ul",{className:"flex flex-col",children:e.jsxs("li",{className:"relative flex items-center justify-between mb-3 text-med-green rounded-lg overflow-hidden transition-colors ease-in-out duration-300 bg-white p-4",children:[e.jsx("span",{onClick:()=>f(b._id),className:"text-left cursor-pointer text-xl font-semibold",children:b==null?void 0:b.title}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-xs text-gray-500",children:b==null?void 0:b.description}),e.jsx("img",{src:b==null?void 0:b.MainPhotos[0],onClick:()=>openModal(b==null?void 0:b.MainPhotos[0]),alt:"state icon",className:"w-10 h-5 cursor-pointer object-cover rounded ml-4"}),e.jsx("button",{onClick:()=>R(b._id,b.title),className:"text-red-600",children:"Delete"})]})]})})},U))})]})]})}function be({setIsAddingPackage:j,addNew:f}){var a;const[d,k]=u.useState({hotelName:"",hotelPrice:null,hotelRating:null,hotelPhotoUrl:[]}),i=N=>{const{name:g,value:h}=N.target;k(x=>({...x,[g]:h}))},r=(N,g)=>{k(h=>{const x=[...h.hotelPhotoUrl];return x[N]=g,{...h,hotelPhotoUrl:x}})},m=async()=>{try{await f(d),j(!1),console.log(d),k({hotelName:"",hotelPrice:0,hotelRating:0,hotelPhotoUrl:[]})}catch(N){console.log(N)}};return e.jsx("div",{className:"bg-gray-50 text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("section",{className:"mb-8 flex flex-col",children:[e.jsx("input",{type:"text",name:"hotelName",placeholder:"Hotel name",value:d.hotelName,onChange:i,className:"text-4xl font-bold mb-2"}),e.jsx("input",{type:"number",name:"hotelRating",placeholder:"rating of the Hotel E.g: 4.5",value:d.hotelRating,onChange:i,className:"text-xl font-semibold mb-4 text-green-600"}),e.jsx("input",{type:"number",name:"hotelPrice",placeholder:"price of the Hotel",value:d.hotelPrice,onChange:i,className:"text-xl font-semibold text-green-600"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4  gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold ",children:"Hotel Photos"}),e.jsx("button",{type:"button",onClick:()=>{k(N=>({...N,hotelPhotoUrl:[...N.hotelPhotoUrl,"","","","",""]}))},className:"bg-green-500 text-white px-4 py-2 rounded-lg",children:"Add 5 Photos"})]}),(a=d==null?void 0:d.hotelPhotoUrl)==null?void 0:a.map((N,g)=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",value:N,onChange:h=>r(g,h.target.value),className:"w-full",placeholder:`HotelPhotos URL ${g+1}`}),e.jsx("button",{type:"button",onClick:()=>{const h=[...d.hotelPhotoUrl];h.splice(g,1),k(x=>({...x,hotelPhotoUrl:h}))},className:"text-red-500 ml-2",children:"Remove"})]},g)),e.jsx("button",{type:"button",onClick:()=>{k(N=>({...N,hotelPhotoUrl:[...N.hotelPhotoUrl,""]}))},className:"bg-blue-500 text-white px-4 py-2 rounded-lg mt-2",children:"Add Main Photo"})]}),e.jsx("button",{onClick:m,className:"bg-blue-500 text-white px-4 py-2 rounded-lg",children:"Save"}),e.jsx("button",{onClick:()=>{j(!1)},className:"bg-red-500 ml-4 text-white px-4 py-2 rounded-lg",children:"Back"})]})})}function ge({setEditPackage:j,initialData:f,id:d,updateById:k,setSelectedId:i}){var h;const[r,m]=u.useState(f||{hotelName:"",hotelPrice:null,hotelRating:null,hotelPhotoUrl:[]}),a=x=>{const{name:p,value:M}=x.target;m(D=>({...D,[p]:M}))},N=(x,p)=>{m(M=>{const D=[...M.hotelPhotoUrl];return D[x]=p,{...M,hotelPhotoUrl:D}})},g=async()=>{try{await k(d,r),i(null),j(!1),m({hotelName:"",hotelPrice:0,hotelRating:0,hotelPhotoUrl:[]})}catch(x){console.log(x)}};return e.jsx("div",{className:"bg-gray-50 text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("section",{className:"mb-8 flex flex-col",children:[e.jsx("input",{type:"text",name:"hotelName",placeholder:"Hotel name",value:r.hotelName,onChange:a,className:"text-4xl font-bold mb-2"}),e.jsx("input",{type:"number",name:"hotelRating",placeholder:"rating of the Hotel E.g: 4.5",value:r.hotelRating,onChange:a,className:"text-xl font-semibold mb-4 text-green-600"}),e.jsx("input",{type:"number",name:"hotelPrice",placeholder:"price of the Hotel",value:r.hotelPrice,onChange:a,className:"text-xl font-semibold text-green-600"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Hotel Photos"}),(h=r==null?void 0:r.hotelPhotoUrl)==null?void 0:h.map((x,p)=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",value:x,onChange:M=>N(p,M.target.value),className:"w-full",placeholder:`HotelPhotos URL ${p+1}`}),e.jsx("button",{type:"button",onClick:()=>{const M=[...r.hotelPhotoUrl];M.splice(p,1),m(D=>({...D,hotelPhotoUrl:M}))},className:"text-red-500 ml-2",children:"Remove"})]},p)),e.jsx("button",{type:"button",onClick:()=>{m(x=>({...x,hotelPhotoUrl:[...x.hotelPhotoUrl,""]}))},className:"bg-blue-500 text-white px-4 py-2 rounded-lg mt-2",children:"Add Main Photo"})]}),e.jsx("button",{onClick:g,className:"bg-blue-500 text-white px-4 py-2 rounded-lg",children:"Save"}),e.jsx("button",{onClick:()=>{j(!1)},className:"bg-red-500 ml-4 text-white px-4 py-2 rounded-lg",children:"Back"})]})})}function Ne(){var T;const[j,f]=u.useState(""),[d,k]=u.useState(!1),[i,r]=u.useState(),[m,a]=u.useState(!1),[N,g]=u.useState(null),h="https://trippo-bazzar-backend.vercel.app/api/hotel",{data:x,loading:p,deleteById:M,updateById:D,addNew:_}=X(h),{data:o,loading:P}=Q(`https://trippo-bazzar-backend.vercel.app/api/hotel/${i}`),H=x.filter(v=>{var b;return(b=v==null?void 0:v.hotelName)==null?void 0:b.toLowerCase().includes(j.toLowerCase())}),R=(v,b)=>{g({message:`Are you sure you want to delete this ${b}?`,onConfirm:()=>{M(v),g(null)},onCancel:()=>g(null)})};return p||P?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[N&&e.jsx(Y,{message:N.message,onConfirm:N.onConfirm,onCancel:N.onCancel}),i?e.jsx(e.Fragment,{children:m?e.jsx(ge,{setEditPackage:a,setSelectedId:r,id:i,updateById:D,initialData:o}):e.jsx("div",{className:"bg-gray-50 text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("section",{className:"mb-8 relative",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-4xl font-bold mb-2",children:o==null?void 0:o.hotelName})}),e.jsx("p",{className:"text-lg mb-4",children:o==null?void 0:o.description}),e.jsxs("p",{className:"text-xl font-semibold text-green-600",children:["Price: Rs. ",o==null?void 0:o.hotelPrice,"/-"]}),e.jsxs("p",{className:"text-xl flex gap-1 items-center font-semibold ",children:[e.jsx("span",{children:" Rating"})," ",e.jsx("span",{className:"mt-[2px]",children:o==null?void 0:o.hotelRating}),e.jsx(ae,{className:"mb-1 text-yellow-300"})]}),e.jsxs("div",{className:"absolute top-1 right-0 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>{a(!0)},className:"bg-blue-600 h-10 py-3 text-center flex items-center hover:scale-95 transition-transform ease-in-out duration-300 text-white font-medium rounded-full px-4",children:"Edit Package"}),e.jsx("button",{onClick:()=>{r(null)},className:"bg-red-600 h-10 py-3 text-center flex items-center hover:scale-95 transition-transform ease-in-out duration-300 text-white font-medium rounded-full px-4",children:"Back"})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Photos"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:(o==null?void 0:o.hotelPhotoUrl.length)>0?o.hotelPhotoUrl.map((v,b)=>e.jsx("img",{src:v,alt:`Tour photo ${b+1}`,className:"rounded-lg w-[400px] h-[300px] shadow-md"},b)):e.jsx("p",{className:"text-black",children:"No Photos of these Hotels"})})]})]})})}):e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>k(!d),className:"bg-green-600 h-10 py-3 text-center flex items-center hover:scale-95 transition-transform ease-in-out duration-300 text-white font-medium rounded-full px-4 mb-4",children:d?"Cancel":"Add Hotel"}),!d&&e.jsx("input",{type:"text",placeholder:"Search by Title",value:j,onChange:v=>f(v.target.value),className:"mb-4 p-2 border border-black outline-none rounded w-[85%]"})]})}),d?e.jsx(be,{setIsAddingPackage:k,addNew:_}):e.jsx("div",{children:(T=H==null?void 0:H.reverse())==null?void 0:T.map((v,b)=>e.jsx("div",{children:e.jsx("ul",{className:"flex flex-col",children:e.jsxs("li",{className:"relative flex items-center justify-between mb-3 text-med-green rounded-lg overflow-hidden transition-colors ease-in-out duration-300 bg-white p-4",children:[e.jsx("span",{onClick:()=>r(v._id),className:"text-left cursor-pointer text-xl font-semibold",children:v==null?void 0:v.hotelName}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["",v==null?void 0:v.hotelPrice,"/-"]}),e.jsx("img",{src:v==null?void 0:v.hotelPhotoUrl[0],onClick:()=>openModal(v==null?void 0:v.hotelPhotoUrl[0]),alt:"state icon",className:"w-10 h-5 cursor-pointer object-cover rounded ml-4"}),e.jsx("button",{onClick:()=>R(v._id,v.hotelName),className:"text-red-600",children:"Delete"})]})]})})},b))})]})]})}function ye(){const j=ee(),[f,d]=u.useState(!1),[k,i]=u.useState("users");u.useEffect(()=>{(()=>{const h=JSON.parse(localStorage.getItem("userInfo"));if(!h){j("/login");return}const x=oe(h.token);x&&x.isAdmin?d(!0):j("/")})()},[j]);const r=g=>{i(g)},{data:m,loading:a,error:N}=Q("https://trippo-bazzar-backend.vercel.app/api/users");return!f||a===!0?e.jsx(q,{}):e.jsxs("div",{className:"flex h-auto font-poppins bg-[#F8F8F8]",children:[e.jsx(re,{handleClick:r}),e.jsx("div",{className:"flex-1  p-6",children:e.jsxs(ne,{children:[e.jsx(G,{path:"users",element:e.jsx(ce,{data:m})}),e.jsx(G,{path:"continent",element:e.jsx(ie,{})}),e.jsx(G,{path:"country",element:e.jsx(de,{})}),e.jsx(G,{path:"state",element:e.jsx(ue,{})}),e.jsx(G,{path:"package",element:e.jsx(pe,{})}),e.jsx(G,{path:"hotels",element:e.jsx(Ne,{})})]})})]})}export{ye as default};
